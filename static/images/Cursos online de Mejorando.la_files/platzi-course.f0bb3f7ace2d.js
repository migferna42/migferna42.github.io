!function(a){"use strict";a.fn.fitVids=function(b){var c={customSelector:null};if(!document.getElementById("fit-vids-style")){var d=document.createElement("div"),e=document.getElementsByTagName("base")[0]||document.getElementsByTagName("script")[0];d.className="fit-vids-style",d.id="fit-vids-style",d.style.display="none",d.innerHTML="&shy;<style>                 .fluid-width-video-wrapper {                   width: 100%;                                position: relative;                         padding: 0;                              }                                                                                       .fluid-width-video-wrapper iframe,          .fluid-width-video-wrapper object,          .fluid-width-video-wrapper embed {             position: absolute;                         top: 0;                                     left: 0;                                    width: 100%;                                height: 100%;                            }                                         </style>",e.parentNode.insertBefore(d,e)}return b&&a.extend(c,b),this.each(function(){var b=["iframe[src*='player.vimeo.com']","iframe[src*='youtube.com']","iframe[src*='youtube-nocookie.com']","iframe[src*='kickstarter.com'][src*='video.html']","object","embed"];c.customSelector&&b.push(c.customSelector);var d=a(this).find(b.join(","));d=d.not("object object"),d.each(function(){var b=a(this);if(!("embed"===this.tagName.toLowerCase()&&b.parent("object").length||b.parent(".fluid-width-video-wrapper").length)){var c="object"===this.tagName.toLowerCase()||b.attr("height")&&!isNaN(parseInt(b.attr("height"),10))?parseInt(b.attr("height"),10):b.height(),d=isNaN(parseInt(b.attr("width"),10))?b.width():parseInt(b.attr("width"),10),e=c/d;if(!b.attr("id")){var f="fitvid"+Math.floor(999999*Math.random());b.attr("id",f)}b.wrap('<div class="fluid-width-video-wrapper"></div>').parent(".fluid-width-video-wrapper").css("padding-top",100*e+"%"),b.removeAttr("height").removeAttr("width")}})})}}(jQuery),function(){!function(a){return a.countdown=function(b,c){var d,e=this;return this.el=b,this.$el=a(b),this.$el.data("countdown",this),this.init=function(){return e.options=a.extend({},a.countdown.defaultOptions,c),e.options.refresh&&(e.interval=setInterval(function(){return e.render()},e.options.refresh)),e.render(),e},d=function(b){var c,d;return b=Date.parse(a.isPlainObject(e.options.date)?e.options.date:new Date(e.options.date)),d=(b-Date.parse(new Date))/1e3,0>=d&&(d=0,e.interval&&e.stop(),e.options.onEnd.apply(e)),c={years:0,days:0,hours:0,min:0,sec:0,millisec:0},d>=31557600&&(c.years=Math.floor(d/31557600),d-=365.25*c.years*86400),d>=86400&&(c.days=Math.floor(d/86400),d-=86400*c.days),d>=3600&&(c.hours=Math.floor(d/3600),d-=3600*c.hours),d>=60&&(c.min=Math.floor(d/60),d-=60*c.min),c.sec=d,c},this.leadingZeros=function(a,b){for(null==b&&(b=2),a=String(a);a.length<b;)a="0"+a;return a},this.update=function(a){return e.options.date=a,e},this.render=function(){return e.options.render.apply(e,[d(e.options.date)]),e},this.stop=function(){return e.interval&&clearInterval(e.interval),e.interval=null,e},this.start=function(b){return null==b&&(b=e.options.refresh||a.countdown.defaultOptions.refresh),e.interval&&clearInterval(e.interval),e.render(),e.options.refresh=b,e.interval=setInterval(function(){return e.render()},e.options.refresh),e},this.init()},a.countdown.defaultOptions={date:"June 7, 2087 15:03:25",refresh:1e3,onEnd:a.noop,render:function(b){return a(this.el).html(""+b.years+" years, "+b.days+" days, "+this.leadingZeros(b.hours)+" hours, "+this.leadingZeros(b.min)+" min and "+this.leadingZeros(b.sec)+" sec")}},void(a.fn.countdown=function(b){return a.each(this,function(c,d){var e;return e=a(d),e.data("countdown")?void 0:e.data("countdown",new a.countdown(d,b))})})}(jQuery)}.call(this),function(a){function b(){return a(".mnav").length?!0:!1}function c(b){var c=!0;return b.each(function(){a(this).is("ul")||a(this).is("ol")||(c=!1)}),c}function d(){return a(window).width()<n.switchWidth}function e(b){return a.trim(b.clone().children("ul, ol").remove().end().text())}function f(b){return-1===a.inArray(b,p)?!0:!1}function g(b){b.find(" > li").each(function(){var c=a(this),d=c.find("a").attr("href"),e=function(){return c.parent().parent().is("li")?c.parent().parent().find("a").attr("href"):null};c.find(" ul, ol").length&&g(c.find("> ul, > ol")),c.find(" > ul li, > ol li").length||c.find("ul, ol").remove(),!f(e(),p)&&f(d,p)?c.appendTo(b.closest("ul#mmnav").find("li:has(a[href="+e()+"]):first ul")):f(d)?p.push(d):c.remove()})}function h(){var b=a('<ul id="mmnav" />');return m.each(function(){a(this).children().clone().appendTo(b)}),g(b),b}function i(b,c,d){d?a('<option value="'+b.find("a:first").attr("href")+'">'+d+"</option>").appendTo(c):a('<option value="'+b.find("a:first").attr("href")+'">'+a.trim(e(b))+"</option>").appendTo(c)}function j(b,c){var d=a('<optgroup label="'+a.trim(e(b))+'" />');i(b,d,n.groupPageText),b.children("ul, ol").each(function(){a(this).children("li").each(function(){i(a(this),d)})}),d.appendTo(c)}function k(b){var c=a('<select id="mm'+o+'" class="mnav" />');o++,n.topOptionText&&i(a("<li>"+n.topOptionText+"</li>"),c),b.children("li").each(function(){var b=a(this);b.children("ul, ol").length&&n.nested?j(b,c):i(b,c)}),c.prependTo(n.prependTo)}function l(){if(d()&&!b())if(n.combine){var c=h();k(c)}else m.each(function(){k(a(this))});d()&&b()&&(a(".mnav").show(),m.hide()),!d()&&b()&&(a(".mnav").hide(),m.show())}var m,n={combine:!0,groupPageText:"Main",nested:!0,prependTo:"body",switchWidth:480,topOptionText:"Select a page"},o=0,p=[];a.fn.mobileMenu=function(b){b&&a.extend(n,b),c(a(this))?(m=a(this),l(),a(window).resize(function(){l()})):alert("mobileMenu only works with <ul>/<ol>")}}(jQuery),function(a){function b(a){return"object"==typeof a?a:{top:a,left:a}}var c=a.scrollTo=function(b,c,d){a(window).scrollTo(b,c,d)};c.defaults={axis:"xy",duration:parseFloat(a.fn.jquery)>=1.3?0:1},c.window=function(){return a(window)._scrollable()},a.fn._scrollable=function(){return this.map(function(){var b=this,c=!b.nodeName||-1!=a.inArray(b.nodeName.toLowerCase(),["iframe","#document","html","body"]);if(!c)return b;var d=(b.contentWindow||b).document||b.ownerDocument||b;return a.browser.safari||"BackCompat"==d.compatMode?d.body:d.documentElement})},a.fn.scrollTo=function(d,e,f){return"object"==typeof e&&(f=e,e=0),"function"==typeof f&&(f={onAfter:f}),"max"==d&&(d=9e9),f=a.extend({},c.defaults,f),e=e||f.speed||f.duration,f.queue=f.queue&&f.axis.length>1,f.queue&&(e/=2),f.offset=b(f.offset),f.over=b(f.over),this._scrollable().each(function(){function g(a){j.animate(l,e,f.easing,a&&function(){a.call(this,d,f)})}var h,i=this,j=a(i),k=d,l={},m=j.is("html,body");switch(typeof k){case"number":case"string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(k)){k=b(k);break}k=a(k,this);case"object":(k.is||k.style)&&(h=(k=a(k)).offset())}a.each(f.axis.split(""),function(a,b){var d="x"==b?"Left":"Top",e=d.toLowerCase(),n="scroll"+d,o=i[n],p=c.max(i,b);if(h)l[n]=h[e]+(m?0:o-j.offset()[e]),f.margin&&(l[n]-=parseInt(k.css("margin"+d))||0,l[n]-=parseInt(k.css("border"+d+"Width"))||0),l[n]+=f.offset[e]||0,f.over[e]&&(l[n]+=k["x"==b?"width":"height"]()*f.over[e]);else{var q=k[e];l[n]=q.slice&&"%"==q.slice(-1)?parseFloat(q)/100*p:q}/^\d+$/.test(l[n])&&(l[n]=l[n]<=0?0:Math.min(l[n],p)),!a&&f.queue&&(o!=l[n]&&g(f.onAfterFirst),delete l[n])}),g(f.onAfter)}).end()},c.max=function(b,c){var d="x"==c?"Width":"Height",e="scroll"+d;if(!a(b).is("html,body"))return b[e]-a(b)[d.toLowerCase()]();var f="client"+d,g=b.ownerDocument.documentElement,h=b.ownerDocument.body;return Math.max(g[e],h[e])-Math.min(g[f],h[f])}}(jQuery),function(a){var b,c;b=function(){return'             <div class="toolbar" style="display: none;">                 <div class="alignleft">                     <a data-wysihtml5-command="bold" class="bold">N</a>                     <a data-wysihtml5-command="italic" class="italic">C</a>                     <a data-wysihtml5-command="createLink" class="icon-link">Enlace</a>                 </div>                                  <div class="alignright">                     <a data-wysihtml5-command="insertImage" class="image icon-image">Insert <strong>Image<strong></a>                     <a class="code icon-code">Insert <strong>Code</srong></a>                 </div>                                  <div class="clear"></div>                                  <div class="bar link-bar" data-wysihtml5-dialog="createLink" style="display: none;">                     <input data-wysihtml5-dialog-field="href" value="http://" class="text">                     <a class="save" data-wysihtml5-dialog-action="save">Insert Link</a>                     <a class="cancel" data-wysihtml5-dialog-action="cancel">X</a>                 </div>                                  <div class="bar image-bar" data-wysihtml5-dialog="insertImage" style="display: none; ">                     <input data-wysihtml5-dialog-field="src" value="http://">                     <a class="save" data-wysihtml5-dialog-action="save">Insert Image</a>                     <a class="cancel" data-wysihtml5-dialog-action="cancel">X</a>                 </div>             </div>         '},c={tags:{a:{check_attributes:{href:"url"},set_attributes:{rel:"nofollow",target:"_blank"}},b:{rename_tag:"strong"},br:1,em:1,i:{rename_tag:"em"},img:{check_attributes:{alt:"alt",height:"numbers",src:"url",width:"numbers"}},pre:{set_attributes:{"class":"prettyprint"}},strong:1}},a.platzi_editor={},a.platzi_editor.defaults={parserRules:c,stylesheets:"/static/organizations/css/platzi-editor-wysihtml5.css?v=1.5"},a.fn.platzi_editor=function(c){return this.each(function(){var d=this,e=a(d),f=b(),g={classname:e.attr("class"),id:e.attr("id"),name:e.attr("name"),placeholder:e.attr("placeholder")},h=_.uniqueId("textarea_"),i=a.extend({},{classname:"",id:h,name:h,placeholder:"Insertar texto.."},g);i.classname+=" platzi-editor",e.attr({id:i.id,placeholder:i.placeholder,name:i.name,"class":i.classname}).wrap('<div class="editor-container"></div>');var j=a(f).insertBefore(e);j.on("click","a.code",function(b){b.preventDefault(),k.composer.commands.exec("formatBlock","pre");var c=k.composer.iframe,d=c.contentDocument?c.contentDocument:c.contentWindow.document,e=a(d.body);e.children().last().is("pre")&&e.append("<br>")});var i=a.extend(a.platzi_editor.defaults,{toolbar:e.parent().find(".toolbar")[0]},c),k=new wysihtml5.Editor(e[0],i);e.data("editor",k),k.observe("load",function(){var b=this;a(b.composer.iframe).autoResize(),wysihtml5.dom.observe(b.composer.element,"keydown",function(a){var c=9;a.which===c&&"PRE"===b.composer.selection.getSelectedNode().parentNode.nodeName&&(a.preventDefault(),b.composer.commands.exec("insertHTML","&nbsp;&nbsp;&nbsp;&nbsp;"),b.composer.commands.exec("insertHTML","&nbsp;&nbsp;&nbsp;&nbsp;"))})})})}}(jQuery),function(a){var b={};b.Interface=function(a,b){var c,d,e;return c=a&&b?a:this,d=a&&b?b:a?a:"interface"+Math.random().toString(),e=function(a){return a.isInterface=!0,a.name=d,c[d]=a,c[d]}},b.Module=function(a,b){var c,d,e,f;return c=a&&b?a:this,d=a&&b?b:a?a:"module"+Math.random().toString(),f={moduleName:d,prototype:{},__includedModules:[],include:function(a){var b;for(b in a)a.hasOwnProperty(b)&&"prototype"!==b&&"isModule"!==b&&"__includedModules"!==b&&"include"!==b&&"moduleName"!==b&&(f[b]=a[b]);if(a.hasOwnProperty("prototype")&&a.prototype)for(b in a.prototype)a.prototype.hasOwnProperty(b)&&(f.prototype[b]=a.prototype[b]);return this.__includedModules.push(a),this}},e=function(a){var b;f.isModule=!0;for(b in a)a.hasOwnProperty(b)&&"prototype"!==b&&"isModule"!==b&&"__includedModules"!==b&&"include"!==b&&"moduleName"!==b&&(f[b]=a[b]);if(a.hasOwnProperty("prototype")&&a.prototype)for(b in a.prototype)a.prototype.hasOwnProperty(b)&&(f.prototype[b]=a.prototype[b]);return c[d]=f,c[d]},e.includes=function(){for(var a=0;a<arguments.length;a++)f.include(arguments[a]);return e},e},b.Class=function(a,b){var c,d,e;return c=a&&b?a:this,b=a&&b?b:a?a:"class"+Math.random().toString(),d=function(){this.init&&this.init.apply(this,arguments)},d.__descendants=[],d.__implementedInterfaces=[],d.__includedModules=[],d.className=b,d.include=function(a){var b;for(b in a)a.hasOwnProperty(b)&&"prototype"!=b&&"constructor"!=b&&"isModule"!=b&&"include"!=b&&"superClass"!=b&&(d[b]=a[b]);if(a.hasOwnProperty("prototype")&&a.prototype)for(b in a.prototype)a.prototype.hasOwnProperty(b)&&(d.prototype[b]=a.prototype[b]);else a.prototype={};return d.__includedModules.push(a),this},e=function(a){var e,f,g,h,i,j=a.prototype;if(j){for(i in j)j.hasOwnProperty(i)&&(d.prototype[i]=j[i]);delete a.prototype}for(i in a)a.hasOwnProperty(i)&&(d[i]=a[i]);for(e=0,f=d.__implementedInterfaces.length;f>e;e++){for(g=0,h=d.__implementedInterfaces[e].constructor.length;h>g;g++)if(!d[d.__implementedInterfaces[e].constructor[g]]){console.log("must implement static "+d.__implementedInterfaces[e].name);break}if(d.__implementedInterfaces[e].hasOwnProperty("prototype")&&d.__implementedInterfaces[e].prototype)for(g=0,h=d.__implementedInterfaces[e].prototype.length;h>g;g++)if(!d.prototype[d.__implementedInterfaces[e].prototype[g]]){console.log("must implement prototype "+d.__implementedInterfaces[e].name);break}}return c[b]=d,d},e.inherits=function(a){var b,c;d.superClass=a,a.hasOwnProperty("__descendants")&&a.__descendants.push(d),c=function(){},c.prototype=a.prototype,d.prototype=new c,d.prototype.constructor=d;for(b in a)a.hasOwnProperty(b)&&"prototype"!=b&&"className"!==b&&"superClass"!==b&&"include"!==b&&"__descendants"!=b&&(d[b]=a[b]);return delete this.inherits,this},e.ensures=function(){for(var a=0;a<arguments.length;a++)d.__implementedInterfaces.push(arguments[a]);return delete this.ensures,e},e.includes=function(){for(var a=0;a<arguments.length;a++)d.include(arguments[a]);return e},e},"function"==typeof define?define(function(){return b}):(a.Class=b.Class,a.Module=b.Module,a.Interface=b.Interface)}("undefined"!=typeof window?window:"undefined"!=typeof exports?exports:null),Class("CustomEvent")({bubbles:!0,cancelable:!0,currentTarget:null,timesStamp:0,target:null,type:"",isPropagationStopped:!1,isDefaultPrevented:!1,isImmediatePropagationStopped:!1,areImmediateHandlersPrevented:!1,prototype:{init:function(a,b){var c;this.type=a;for(c in b)b.hasOwnProperty(c)&&(this[c]=b[c])},stopPropagation:function(){this.isPropagationStopped=!0},preventDefault:function(){this.isDefaultPrevented=!0},stopImmediatePropagation:function(){this.stopImmediateHandlers(),this.stopPropagation()},preventImmediateHandlers:function(){this.areImmediateHandlersPrevented=!0}}}),Module("CustomEventSupport")({eventListeners:null,bind:function(a,b){var c,d;this.hasOwnProperty("eventListeners")||(this.eventListeners={}),this.eventListeners[a]||(this.eventListeners[a]=[]),c=!1,d=this.eventListeners[a];for(var e=0;e<d.length;e++)if(d[e]==b){c=!0;break}return c||this.eventListeners[a].push(b),this},unbind:function(a,b){var c,d,e;for(d=!1,this.eventListeners||(this.eventListeners={}),"undefined"==typeof b&&(this.eventListeners[a]=[]),c=0;c<e.length;c++)if(e[c]==b){d=!0;break}return d&&this.eventListeners[a].splice(c,1),this},dispatch:function(a,b){var c,d,e;this.eventListeners||(this.eventListeners={}),c=new CustomEvent(a,b),c.target=this,d=this.eventListeners[a]||[],e=!0;for(var f=0;f<d.length&&(d[f].call(this,c),!c.areImmediateHandlersPrevented);f++);return c},prototype:{eventListeners:null,bind:function(a,b){var c;this.eventListeners||(this.eventListeners={}),this.eventListeners[a]||(this.eventListeners[a]=[]),c=!1;for(var d=0;d<this.eventListeners.length;d++)if(this.eventListeners[d]==b){c=!0;break}return c||this.eventListeners[a].push(b),this},unbind:function(a,b){var c,d,e;for(d=!1,this.eventListeners||(this.eventListeners={}),"undefined"==typeof b&&(this.eventListeners[a]=[]),c=0;c<e.length;c++)if(e[c]==b){d=!0;break}return d&&this.eventListeners[a].splice(c,1),this},dispatch:function(a,b){var c,d,e;this.eventListeners||(this.eventListeners={}),c=new CustomEvent(a,b),c.target=this,d=this.eventListeners[a]||[],e=!0;for(var f=0;f<d.length&&(d[f].call(this,c),!c.areImmediateHandlersPrevented);f++);return c}}}),Class("PonyExpress").includes(CustomEventSupport)({capitalise:function(a){return a.charAt(0).toUpperCase()+a.slice(1)},prototype:{_io:null,init:function(a){this.templates=new PonyExpress.Template(a)},log:function(a,b,c,d){var e=(window.location.host.split(".")[0],user.name,{type:"POST"});e.url="/history/",e.xhrFields={withCredentials:!0},e.crossDomain=!0,e.data={referenceType:a,course:window.course,referenceId:b,referenceIdentifier:c,referenceTitle:d};$.ajax(e).fail(function(){console.log("Node server not available",arguments)})}}}),Class(PonyExpress,"Plug").includes(CustomEventSupport)({prototype:{namespace:"",init:function(a){if(!window.ponyExpress)throw"Create a PonyExpress before a PonyExpress Model";if(!a.name)throw"All ponyExpress models require a name";for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);this._bindCrud()},_bindCrud:function(){var a=this;"organizer"==window.user.role&&window.ponyExpress._io.on(this.name+"::count",function(a){Platzi.live.Users(a)}),window.ponyExpress._io.on(this.name+"::admin",function(a){Platzi.live.Message(a)}),window.ponyExpress._io.on(this.name+"::action",function(a){Platzi.live.Action(a)}),window.ponyExpress._io.on(this.name+"::link",function(a){Platzi.live.Links(a)}),window.ponyExpress._io.on(this.name+"::create",function(b){a.onCreate(b)}),window.ponyExpress._io.on(this.name+"::delete",function(b){a.onDelete(b)}),window.ponyExpress._io.on(this.name+"::update",function(b){a.onUpdate(b)}),this.events.forEach(function(b){window.ponyExpress._io.on(a.name+"::"+b,function(c){a["on"+PonyExpress.capitalise(b)](c),a.dispatch(b,c)})})},onCreate:function(a){if(!a.id)throw"PonyExpress Items need id";this.dispatch("create",a)},onDelete:function(a){if(!a.id)throw"PonyExpress Items need id";this.dispatch("delete",a)},onUpdate:function(a){if(!a.id)throw"PonyExpress Items need id";this.dispatch("update",a)}}}),Class(PonyExpress,"Template")({prototype:{_templates:{},init:function(a){a=a||{},templates=a.templates||window.templates,compiler=a.compiler||_.template,this._templates={};var b=this;_(window.templates).forEach(function(a,c){_(a).forEach(function(a,d){b._templates[c+"::"+d]=compiler(a)})})},get:function(a){return this._templates[a]}}}),Backbone.sync=function(a,b,c){var d={create:"POST",update:"POST",patch:"PATCH","delete":"DELETE",read:"GET"},e=d[a];_.defaults(c||(c={}),{emulateHTTP:Backbone.emulateHTTP,emulateJSON:Backbone.emulateJSON});var f={type:e};c.url||(f.url=_.result(b,"url")||urlError()),b.action&&(f.url=f.url+"/"+b.action,delete b.action),null!==c.data||!b||"create"!==a&&"update"!==a&&"patch"!==a||(f.contentType="application/json",f.data=JSON.stringify(c.attrs||b.toJSON(c))),f.xhrFields={withCredentials:!0},f.crossDomain=!0;var g=this.toJSON();_.isArray(g)&&(g={}),window.klass&&(g.class=window.klass),window.klassId&&(g.classId=window.klassId),window.course&&(g.course=window.course),window.BrowserDetect&&window.BrowserDetect.OS&&(g.os=window.BrowserDetect.OS),window.BrowserDetect&&window.BrowserDetect.browser&&(g.browser=window.BrowserDetect.browser),window.user&&window.user.name&&(g.user=window.user.name),f.data=g;var h=c.xhr=$.ajax(f);return c.success&&h.done(function(a){_.isArray(a)&&a.forEach(function(a){a._id&&!a.id&&(a.id=a._id,delete a._id)}),c.success(a)}),b.trigger("request",b,h,c),h},Platzi.Models.Discussion=Backbone.Model.extend({className:"discussion",initialize:function(){this.comments=new Platzi.Collections.Comments(this.get("comments"))},remove:function(){var a;a="discussionSingle"===window.app.state?"/course/"+window.course+"/discussion/"+this.get("shash")+"/delete/":"/course/"+window.course+"/contribution/"+this.get("shash")+"/delete/",$.post(a,{is_ajax:!0}),Backbone.history.navigate("/discusiones/",{trigger:!0})},upvote:function(){var a=this.get("vote"),b=parseInt(this.get("points"),10);if("liked"!=a){b+="disliked"==a?2:1,a="liked",this.set({vote:a,points:b});var c="/course/"+course+"/"+this.get("model")+"/"+this.get("shash")+"/like/";$.get(c)}},downvote:function(){var a=this.get("vote"),b=parseInt(this.get("points"),10);if("disliked"!=a){b-="liked"==a?2:1,a="disliked",this.set({vote:a,points:b});var c="/course/"+course+"/"+this.get("model")+"/"+this.get("shash")+"/dislike/";$.get(c)}}}),Platzi.Models.Contribution=Platzi.Models.Discussion.extend({className:"contribution"}),Platzi.Models.Comment=Backbone.Model.extend({url:function(){var a,b;if(this.discussion)a=this.discussion,b="/course/"+course+"/discussion/"+this.discussion.get("shash")+"/add_comment/";else{if(!this.contribution)throw"comment need an asset and asset type";a=this.contribution,b="/course/"+course+"/contribution/"+this.contribution.get("shash")+"/add_comment/"}return this.parentComment&&this.set("parent",this.parentComment.get("shash")),b},initialize:function(){this.comments=new Platzi.Collections.Comments(this.get("comments"))},remove:function(){var a="/course/"+window.course+"/comment/"+this.get("shash")+"/delete_comment/";$.post(a)},upvote:function(){if("liked"!=this.get("user_vote")){var a=parseInt(this.get("points"),10);"disliked"==this.get("user_vote")?a+=2:a++,this.set({points:a,user_vote:"liked"});var b="/course/"+window.course+"/comment/"+this.get("shash")+"/like/";$.post(b),prettyPrint()}},downvote:function(){if("disliked"!=this.get("user_vote")){var a=parseInt(this.get("points"),10);"liked"==this.get("user_vote")?a-=2:a--,this.set({points:a,user_vote:"disliked"});var b="/course/"+window.course+"/comment/"+this.get("shash")+"/dislike/";$.post(b),prettyPrint()}}}),Platzi.Collections.Discussion=Backbone.Collection.extend({className:"discussion",model:Platzi.Models.Discussion,type:"",page:2,initialize:function(){this.page=2},setType:function(a,b){this.empty(),this.type=a,this.term=b,this.page=2,$("#infscr-loading").hide();var c=$(".dicussions-list");c.infinitescroll("pause");var d=$(".contributions-list");d.infinitescroll("pause")},fetch:function(){window.collections.discussions.page=1,window.collections.contributions.page=1;var a,b=this,c=$(".dicussions-list"),d=$(".contributions-list");"search"===this.type?(a="discussion"===this.className?window.actions.searchDiscussion:window.actions.searchContribution,a=a+"?is_ajax=true&search="+this.term):a="/course/"+window.course+"/"+this.className+"/page/"+window.collections.discussions.page+"/?filter="+this.type,c.infinitescroll("pause"),d.infinitescroll("pause");var e;this.type&&(e=$.get(a),e.done(function(a){c.infinitescroll("resume"),d.infinitescroll("resume"),b.page++,$.each(a,function(a,c){"discussion"===c.model?b.add(c):window.collections.contributions.add(c)})}),e.error(function(a){console.log(a)}))},empty:function(){this.each(function(a){setTimeout(function(){a.trigger("destroy",a,a.collection)})})}}),Platzi.Collections.Contribution=Platzi.Collections.Discussion.extend({className:"contribution"}),Platzi.Collections.Comments=Backbone.Collection.extend({model:Platzi.Models.Comment,initialize:function(){}});var $discussions_list=$(".discussion-list"),$contribution_list=$(".contributions-list"),random=Math.floor(4*Math.random());Platzi.Views.Discussion=Backbone.View.extend({prefixEn:"discussion",prefixSp:"discusion",templateName:"discussion::discussion",templateListNameB:"discussion::discussion-list-b",assetName:"discussion",events:{click:"goToContent","click .like":"upvote","click .nolike":"downvote","submit .editor":"createComment","click .btn-yellow":"stopPropagation","click .btn-gray":"closeEditor","click .contribution-link":"goToLink","click .author":"gotoProfileAutor","click .delete":"deleteDiscussion","click .contribution-description a:not(.link-single)":"stopPropagation","click .resp":"reply","click .return-to-discussions":"returnToDiscussions"},initialize:function(a){var b=this;this.model=a,this.model.comments.on("add",function(a){var c=new Platzi.Views.Comment(a);c.render(),c.$el.prependTo(b.$el.find(".response-body"))}),this.model.on("destroy",function(){b.remove()}),this.model.on("change",function(){b.render()})},returnToDiscussions:function(a){Backbone.history.navigate("/discusiones/",!0),a.stopPropagation(),a.preventDefault()},reply:function(a){var b=$(a.currentTarget),c=b.data("editor");if($editor=$("[data-editor="+c+"]"),$(".editor").hide(),$editor.is(".displayed"))$editor.slideDown().addClass("active");else{$("#"+c).platzi_editor();var d=$("#"+c).data("editor");d.on("load",function(){d.focus()}),d.on("focus",function(){d.composer.focusStylesHost.style.background="white"}),d.on("blur",function(){d.composer.focusStylesHost.style.background="#F1F5F7"}),$(".discussion-contribution-view").scrollTo($editor,500,function(){$editor.slideDown().addClass("active displayed")})}},deleteDiscussion:function(a){a.stopPropagation(),a.preventDefault(),$(a.currentTarget).hasClass("active")&&(window.app.currentContribution?(window.app.currentContribution.remove(),window.select_discussion&&window.select_discussion.$el.find(".contribution").addClass("inactive")):(window.app.currentDiscussion.remove(),window.select_discussion&&window.select_discussion.$el.find(".discusion").addClass("inactive")),Backbone.history.navigate("/",{trigger:!0})),$(a.currentTarget).addClass("active").text("Confirmar")},stopPropagation:function(a){a.stopPropagation()},closeEditor:function(a){a.stopPropagation();var b=$(a.currentTarget),c=b.data("editor");$("form[data-editor="+c+"]").slideUp()},getLocals:function(){var a={discussion:this.model.toJSON()};return a.discussion.date=moment.utc(a.discussion.date).fromNow(),a},render:function(){var a=this.getLocals();"discussionSingle"===window.app.state||"contributionSingle"===window.app.state?(this.$el.html(ponyExpress.templates.get(this.templateName)(a)),this.renderComments()):(this.$el.html(ponyExpress.templates.get(this.templateListNameB)(a)),$(".dicussions-list, .contributions-list").removeClass("loading"))},renderAsList:function(){var a=this.getLocals();this.$el.html(ponyExpress.templates.get(this.templateListNameB)(a)),$(".dicussions-list, .contributions-list").removeClass("loading")},gotoProfileAutor:function(a){a.stopPropagation()},goToLink:function(a){a.stopPropagation()},goToContent:function(a){window.select_discussion=this,a.preventDefault(),a.stopPropagation();var b,c=this.model.get("shash");b=0===window.location.pathname.indexOf("/course")?this.prefixEn:this.prefixSp,Backbone.history.navigate(b+"/"+c+"/",{trigger:!0})},renderComments:function(){var a=this,b=this.model.comments.toArray();b=_.sortBy(b,function(a){var b=parseInt(a.get("points"),10);return-b}),b.forEach(function(b){var c=new Platzi.Views.Comment(b);c.render(),a.$el.find(".response-body").append(c.$el.fadeIn(function(){prettyPrint()}))})},createComment:function(){var a=this,b=a.$el,c=b.find(".discusion-answer textarea"),d=b.find(".comment-wrap"),e=c.val();if(d.addClass("active"),e){var f=new Platzi.Models.Comment({content:e,liked:!0});f[this.assetName]=this.model;var g=f.save();return g.done(function(c){c.user_vote="liked",b.find(".discusion-answer").slideUp(),b.find("iframe").contents().find("body").text(""),a.model.comments.unshift(c),d.removeClass("active"),window.log("create_comment",c.id,c.shash,c.content,window.course)}),g.fail(function(a){console.log("error",a.responseJSON),d.removeClass("active")}),!1}},upvote:function(a){a.stopPropagation(),a.preventDefault(),this.model.upvote()},downvote:function(a){a.stopPropagation(),a.preventDefault(),this.model.downvote()}}),Platzi.Views.Contribution=Platzi.Views.Discussion.extend({prefixEn:"contribution",prefixSp:"aporte",templateName:"discussion::contribution",templateListName:"discussion::contribution-list",templateListNameB:"discussion::contribution-list-b",templateListNameC:"discussion::contribution-list-c",templateListNameD:"discussion::contribution-list-d",assetName:"contribution"}),Platzi.Views.Comment=Backbone.View.extend({className:"comment",templateListName:"discussion::comment",assetName:"discussion",events:{"click .delete":"deleteComment","click .like":"upvote","click .nolike":"downvote","click .btn-yellow":"stopPropagation","click .btn-gray":"closeEditor","submit .editor":"createComment","click a[rel=nofollow]":"stopPropagation"},stopPropagation:function(a){a.stopPropagation()},closeEditor:function(a){a.stopPropagation();var b=$(a.currentTarget),c=b.data("editor");$("form[data-editor="+c+"]").slideUp()},initialize:function(a){var b=this;this.model=a,this.model.comments.on("add",function(a){var c=new Platzi.Views.Comment(a);c.render(),c.$el.prependTo(b.$el.find("> .comments-container"))}),this.model.on("change",function(){b.render()})},render:function(){var a=this.model.toJSON();a.date=moment.utc(a.date).fromNow(),this.$el.html(ponyExpress.templates.get(this.templateListName)(a)),this.renderComments()},renderComments:function(){var a=this;this.model.comments.each(function(b){var c=new Platzi.Views.Comment(b);c.render(),c.$el.appendTo(a.$el.find("> .comments-container"))})},upvote:function(a){a.preventDefault(),this.model.upvote()},downvote:function(a){a.preventDefault(),this.model.downvote()},deleteComment:function(a){a.stopPropagation(),$(a.currentTarget).hasClass("active")&&(this.$el.remove(),this.model.remove()),$(a.currentTarget).addClass("active").text("Confirmar")},createComment:function(){var a=this,b=a.$el,c=b.find(".answer textarea"),d=b.find(".comment-wrap"),e=c.val();if(d.addClass("active"),e){var f=new Platzi.Models.Comment({content:e});window.app.currentDiscussion&&(f.discussion=window.app.currentDiscussion),window.app.currentContribution&&(f.contribution=window.app.currentContribution),f.parentComment=this.model;var g=f.save();return g.done(function(c){c.user_vote="liked",b.find(".answer").slideUp(),b.find("iframe").contents().find("body").text(""),a.model.comments.unshift(c),prettyPrint(),d.removeClass("active"),window.log("comment",c.id,c.shash,c.content,window.course)}),g.fail(function(a){console.log("error",a),d.removeClass("active")}),!1}}}),Platzi.Models.MaterialModel=Backbone.Model.extend({getContent:function(){var a=this;if(!a.get("content")){var b=$.get(this.get("load_content_url")+"?is_ajax=true");b.done(function(b){a.set("content",b.content)})}}}),Platzi.Models.Material=Platzi.Models.MaterialModel,Platzi.Collections.MaterialCollection=Backbone.Collection.extend({model:Platzi.Models.MaterialModel,url:"",name:"Material",search:function(a){if(""==a)return this;var b=new RegExp(a,"gi");return _(this.filter(function(a){return b.test(a.get("name"))}))},comparator:function(a){return a.get("name")},getOne:function(a){return this.filter(function(b){return b.get("id")==a})},parse:function(a){return a.data}}),Platzi.Collections.material=Platzi.Collections.MaterialCollection,Platzi.Views.MaterialView=Backbone.View.extend({events:{click:"gotoMaterialExtended","click .Material-edit":"editMaterial"},className:"Material",template:_.template($("#Material-template").html()),initialize:function(a){a.image?a.image.indexOf("media/")<=0&&a.image.indexOf("static/organizations/images/timeline/thumb-default.jpg")<=0&&(a.image=publicaws+"media/"+a.image):a.image=publicaws+"static/organizations/images/timeline/thumb-default.jpg",a.edit_url="/course/"+course+"/material/"+a.slug+"/edit_material/",this.model=a,a.active||(this.className+=" is-inactive")},render:function(a){var b={material:this.model},c=this.template(b);this.model.seen?this.$el.html(c).removeClass("is-unread"):this.$el.html(c).addClass("is-unread"),a.append(this.$el)},gotoMaterialExtended:function(a){a.preventDefault(),$(a.currentTarget).removeClass("is-unread"),Backbone.history.navigate("/concepto/"+this.model.concept+"/"+this.model.slug+"/",{trigger:!0})},editMaterial:function(a){a.stopPropagation()}}),Platzi.Views.MaterialExtendedView=Backbone.View.extend({events:{click:"test","click .Material-return":"gotoConcetps","submit #problem-video":"errorVideo","click #button-error-video":"openFormErrorVideo",copy:"scrapping"},template:_.template($("#Material--extended-template").html()),initialize:function(a){this.model=a,this.$display=$("#Material-display"),this.model.only_free_course=window.only_free_course
},render:function(){var a={material:this.model},b=this.template(a);this.$el.html(b),this.$display.html(this.$el),prettyPrint(),this.$display.fitVids({customSelector:".iframe"}),this.$errorVideo=$("#problem-video"),this.$errorVideoContainer=this.$errorVideo.parent();{var c={type:"POST",url:"/history/",data:{referenceType:"material_viewed",referenceIdentifier:a.material.name,course:window.course}};$.ajax(c)}},gotoConcetps:function(){Backbone.history.navigate("/",{trigger:!0}),this.$display.html("")},openFormErrorVideo:function(){this.$errorVideo.slideDown()},errorVideo:function(a){a.preventDefault();var b=this,c=this.$errorVideo.attr("action");this.$errorVideoContainer.html("Aceptamos el reto de hacer que tengas la mejor experiencia en educaciÃ³n"),$.post(c,this.$errorVideo.serialize(),function(){b.$errorVideoContainer.fadeOut(function(){b.$errorVideoContainer.remove()})})},scrapping:function(){var a=$(".Material--extended-content"),b=new String(window.getSelection()).length,c=25*a.text().length/100;if(b>=c){var d={type:"POST"},e=100*b/a.text().length;d.url="/history/",d.data={referenceType:"scrapping",scrapping:Math.round(e),course:$(".material-content h1").text()};{$.ajax(d).fail(function(){console.log("Node server not available",arguments)})}}}}),Platzi.Views.ProjecFilterView=Backbone.View.extend({events:{"change select":"change"},template:_.template($("#Concepts-ProjectFilter").html()),$primitiveSelect:$(".Concepts-ProjectInputContainer--select select"),initialize:function(){var a=this;console.log("filter init"),this.$primitiveSelect.on("change",function(){a.change(a)}),this.$primitiveSelect.on("liszt:showing_dropdown",function(){a.setIcons(a)})},render:function(a){var b=this;this.projects=a,_.each(this.projects,function(a){b.renderOption(a)}),this.$primitiveSelect.chosen(),this.$select=$(".chzn-container.chzn-container-single .chzn-single"),this.$drop=$(".chzn-container.chzn-container-single .chzn-drop"),this.$select.addClass("icon-votedown"),this.calcDropWidth(),this.setColor()},renderOption:function(a){var a={project:a},b=this.template(a);this.$primitiveSelect.append(b)},change:function(a){var b,c,d=a.$primitiveSelect.children("option:selected"),e=d.val(),f=!0;a.$select.find("span").append('<img src="'+d.attr("data-img-url")+'" />'),a.$select.css("color",d.attr("data-color"));for(index in this.projects)this.projects[index].project_name==e&&(b=this.projects[index].concepts,c=this.projects[index].project_logo);$("#Concepts").css({transition:"all .5s ease-in-out",transform:"translateY(5%)",opacity:"0"}),$("#Concepts").on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){f&&($(this).html(""),_.each(b,function(a){for(index in a.materials)a.materials[index].project&&!a.materials[index].project_logo&&(a.materials[index].project_logo=c);a.project_logo=c,a.lines=Math.round(a.materials.length/2),conceptsCollection.add(a)}),$(this).css({transform:"translateY(0)",opacity:"1"}),$("#Careers img").lazyload({container:$("#Careers"),effect:"fadeIn",threshold:400}),f=!1)}),this.calcDropWidth()},setColor:function(){var a=this,b=this.$primitiveSelect.children("option:selected");this.$select.find("span").append('<img src="'+b.attr("data-img-url")+'" />'),this.$select.css("color",b.attr("data-color")),this.$primitiveSelect.children("option").each(function(){var b=$(this).text(),c=$(this).attr("data-color"),d=a.$drop.find('.chzn-results li:contains("'+b+'")'),e=$(this).attr("data-img-url");d.css("color",c).attr("data-img-url",e)})},calcDropWidth:function(){a+=parseInt(this.$select.css("padding-left")),a+=parseInt(this.$select.css("padding-right"));var a=a>170?a:170;this.$drop.width(a),this.$drop.parent(".chzn-container").width(a)},setIcons:function(a){setTimeout(function(){a.$drop.find(".chzn-results li").each(function(){var a=$(this).attr("data-img-url");$(this).prepend($("<img />",{"class":"project-icon",src:a}))})},0)}}),Platzi.Views.ConceptView=Backbone.View.extend({events:{},template:_.template($("#Concept-template").html()),className:"Concept",initialize:function(a){this.model=a},render:function(){var a=this.model.toJSON(),b=this.template(a);for(this.$el.html(b),this.$Materials=this.$el.find(".Concept-materials"),$("#Concepts").append(this.$el),i=1;i<=a.lines;i++)this.$el.append('<span class="concept-line" data-line='+i+"></span>");this.renderMaterials(a)},renderMaterials:function(a){var b=this;_.each(a.materials,function(a){a.concept=b.attributes.slug;var c=new Platzi.Views.MaterialView(a);c.render(b.$Materials)})}}),Platzi.Models.ConceptModel=Backbone.Model.extend({}),Platzi.Collections.ConceptCollection=Backbone.Collection.extend({model:Platzi.Models.ConceptModel}),Platzi.Routers.TimelineRouter=Backbone.Router.extend({routes:{"":"root","concepto/:slugConcepto/:slugMaterial/":"materialSingle","discussion/:hash/":"discussionSingle","discusion/:hash/":"discussionSingle","discussions/:type/":"discussionFilter","discusiones/:type/":"discussionFilter","contribution/:hash/":"contributionSingle","aporte/:hash/":"contributionSingle","discusiones/":"discussions","discusion/search/:search/":"searchDiscussion","aporte/search/:search/":"searchContribution"},initialize:function(){this.$materialDisplay=$("#Material-display"),this.$careerDisplay=$("#Careers"),this.$discussions=$(".discussion-contribution-view"),window.currentConcept="";{var a={type:"POST",url:"/history/",data:{referenceType:"enter_course",course:window.course}};$.ajax(a)}},root:function(){this.showPanel(this.$careerDisplay),this.hidePanel(this.$materialDisplay),timeline.countLine()},searchDiscussion:function(a){var b=$(".search-filter"),c=$(".search");a=a.replace(/-/g," "),$(function(){b.trigger("click"),c.find(".search-input").val(a),c.trigger("submit")})},searchContribution:function(a){var b=$(".search-filter"),c=$(".search");a=a.replace(/-/g," "),$(function(){$(".call-contributions ").trigger("click"),b.trigger("click"),c.find(".search-input").val(a),c.trigger("submit")})},contributionSingle:function(a){window.tabactive="Contribution",window.app.state="contributionSingle",window.app.hash=a,window.app.currentContribution=null,$(".discussion-contribution-view").addClass("active loading"),$(".call-discussions").removeClass("active"),$(".call-contributions").addClass("active"),$(".toContributions").addClass("active"),$(".discussion-contribution-view").html("");var b="/course/"+window.course+"/contribution/"+a+"/single/?is_ajax=true",c=$.get(b);c.done(function(a){var b,c;[2,1].forEach(function(d){c=b||a.comments,b=[],c.forEach(function(a){if(a.level==d){var e=_.find(c,function(b){return b.shash==a.parent});if(!e)return;e.comments||(e.comments=[]),e.comments.push(a)}else b.push(a)}),d--}),a.comments=b,$(".discussion-contribution-view").removeClass("loading"),window.app.currentContribution=new Platzi.Models.Contribution(a),window.app.currentView=new Platzi.Views.Contribution(window.app.currentContribution),window.app.currentView.render(),window.app.currentView.$el.appendTo(".discussion-contribution-view"),window.log("contribution_viewed",a.id,a.shash,a.title,window.course)})},discussionSingle:function(a){window.app.state="discussionSingle",window.app.hash=a,window.app.currentDiscussion=!0,$(".discussion-contribution-view").addClass("active loading"),$(".toDiscussions").addClass("active"),$(".discussion-contribution-view").html("");var b="/course/"+window.course+"/discussion/"+a+"/single/?is_ajax=true";$.get(b,function(a){var b,c;[2,1].forEach(function(d){c=b||a.comments,b=[],c.forEach(function(a){if(a.level==d){var e=_.find(c,function(b){return b.shash==a.parent});if(!e)return;e.comments||(e.comments=[]),e.comments.push(a)}else b.push(a)}),d--}),a.comments=b,$(".discussion-contribution-view").removeClass("loading"),window.app.currentDiscussion=new Platzi.Models.Discussion(a),window.app.currentView=new Platzi.Views.Discussion(window.app.currentDiscussion),window.app.currentView.render(),window.app.currentView.$el.appendTo(".discussion-contribution-view"),window.log("discussion_viewed",a.id,a.shash,a.content,window.course)})},discussionFilter:function(a){window.searchTypes[a]||(a=_.invert(window.searchTypes)[a]),window.app.state="discussionFilter",window.app.type=a,$(".dicussions-list").addClass("loading"),$(".discussions-filters a").removeClass("active"),$('.discussions-filters a[data-type="'+a+'"]').addClass("active"),window.collections.discussions.setType(a),window.collections.discussions.fetch(),window.collections.contributions.setType(),window.collections.contributions.fetch()},contributionFilter:function(a){window.searchTypes[a]||(a=_.invert(window.searchTypes)[a]),$(".contributions-list").addClass("loading"),$(".call-discussions, .dicussions-list").removeClass("active"),$(".call-contributions, .contributions-list").addClass("active"),window.tabactive="Contribution",window.app.state="contributionFilter",window.app.type=a,$(".discussions-filters a").removeClass("active"),$('.discussions-filters a[data-type="'+a+'"]').addClass("active"),window.collections.contributions.setType(a),window.collections.contributions.fetch()},materialSingle:function(a,b){$.get("/course/"+course+"/concept/"+a+"/"+b+"/single/?is_ajax=true",function(a){var b=new Platzi.Views.MaterialExtendedView(a);b.render()}),this.showPanel(this.$materialDisplay),this.hidePanel(this.$careerDisplay)},discussions:function(){this.$discussions.removeClass("active"),window.app.state=""},showPanel:function(a){a.addClass("is-ready"),setTimeout(function(){a.addClass("is-active")},100)},hidePanel:function(a){a.removeClass("is-active"),setTimeout(function(){a.removeClass("is-ready")},300)}}),$(function(){window.ponyExpress=new PonyExpress}),$(function(){console.log("concept initializer"),window.conceptsCollection=new Platzi.Collections.ConceptCollection;var a={init:function(){},add:function(a){var b=new Platzi.Views.ConceptView(a);b.render()}};conceptsCollection.on("add",a.add);var b,c,d,e=new Platzi.Views.ProjecFilterView;data.projects[0].concepts?(b=data.projects[0].concepts,c=data.projects,d=c[0].project_logo,e.render(c),$(".Concepts-ProjectFilter").removeClass("is-hide")):(b=data.projects,$(".Concepts-ProjectFilter").addClass("is-hide")),_.each(b,function(a){for(index in a.materials)a.materials[index].project&&(a.materials[index].project_logo=d);a.lines=Math.round(a.materials.length/2),conceptsCollection.add(a)})}),$(function(){window.templates=window.templates||{},window.Materials=new Platzi.Collections.MaterialCollection,window.collections.discussions=new Platzi.Collections.Discussion,window.collections.contributions=new Platzi.Collections.Contribution;window.collections.discussions.on("add",function(a){var b=new Platzi.Views.Discussion(a);a.get("isNew")?$(".dicussions-list").prepend(b.$el):$(".dicussions-list").append(b.$el),b.renderAsList()}),window.collections.contributions.on("add",function(a){var b=new Platzi.Views.Contribution(a);a.get("isNew")?$(".dicussions-list").prepend(b.$el):$(".dicussions-list").append(b.$el),b.renderAsList()}),window.collections.discussions.setType("bests"),"discussionFilter"!==window.app.state&&$.each(window.data.discussions_contributions,function(a,b){"discussion"===b.model?window.collections.discussions.add(b):window.collections.contributions.add(b)}),window.tabactive||(window.tabactive="Discussion");var a=$("#Timeline"),b=$(".description-content"),c=$(".discussions-filters"),d=($(".discussions-filters a"),$(".materials-filters li")),e=$(".focus-display"),f=($(".search-filter"),$(".search")),g=$(".dicussions-list"),h=$(".contributions-list"),i=($(".discussion-contribution-wrap"),$(".discussion-contribution-view"),$(".discussions-contributtion-form")),j=i.find("[name=is_contribution]"),k=$(".Timeline-colRight"),m=($(".call-discussions"),$(".call-contributions"),$(".discussion-contribution-view"),$(".class-display"),$(".Material--display"));jQuery.fn.reset=function(){$(this).each(function(){this.reset()})},$(".chosen").chosen();var n=$(".Notice.is-orange .Notice-title"),o=n.find("small");o.countdown({date:dateLive,render:function(a){if(0===a.hours)return $(this.el).html("En: "+this.leadingZeros(a.min)+" Minutos y "+this.leadingZeros(a.sec)+" Segundos, empieza la clase");var b;return b=a.hours>=2?" Horas ":" Hora ",$(this.el).html("En: "+this.leadingZeros(a.hours)+b+this.leadingZeros(a.min)+" Minutos y "+this.leadingZeros(a.sec)+" Segundos, empieza la clase")},onEnd:function(){n.text("Estamos en vivo"),n.append("<small>Entra a la clase</small>")}}),window.timeline={init:function(){timeline.is_contribution(),timeline.inputDicussionContribution(),timeline.inputCounter(),timeline.displayAdmin(),timeline.dicussion_contributtion_add(),timeline.responsiveDiscussions(),timeline.inifiniteScroll(),timeline.filterDiscussionContributions(),timeline.materialFilters(),timeline.outstandings(),timeline.search(),timeline.countLine(),timeline.resize(),$("img").lazyload({effect:"fadeIn",threshold:200,container:$("#Careers")})},countLine:function(){var a,b=$("#Concepts .Concept"),c=$(window).width(),d=$(".concept-line");c>480?(c>1454?a=4:1e3>=c&&c>=720||c>=1215?a=3:(c>1e3&&1215>c||720>c)&&(a=2),d.removeAttr("style"),b.find(".Material").removeAttr("style"),$.each(b,function(b,c){var d=$(c),e=$(c).find(".Material"),f=0,g=1;$.each(e,function(b,c){var h=$(c),i=b+1,j=b,k=0;if(f>=a-1){var m=j-a+1;for(l=m;j>=l;l++){var n=d.find(".Material:eq("+l+")"),o=n.height();n.attr("data-group",b),o>k&&(k=o),l==j&&d.find("[data-group="+b+"]").height(k)}f=0}else f++;if(i%a===0&&i<e.length){var p=h.position().top+h.outerHeight()+20,q=(h.parents(".Concept").width()-h.position().left+40)/2,r=h.next().position().left+100;d.find(".concept-line[data-line="+g+"]").css({top:p,left:r,right:q}).show(),g++}})})):d.removeAttr("style")},resize:function(){function a(){b.countLine()}var b=this;$(window).on("resize",a)},inputDicussionContribution:function(){b.on("focus",function(){i.addClass("active"),c.slideUp(300),e.slideDown(300)}),$("#cancel-input").on("click",function(){i.removeClass("active"),g.removeClass("down"),c.slideDown(300),i.removeClass("contributionactive"),e.slideUp(300),i.find("label.error").hide()})},inputCounter:function(){b.on("keyup paste keypress",function(a){var c=140-b.val().length,d=$(".input-counter");if(0===c?d.addClass("fin"):d.removeClass("fin"),d.text("..."+c),32===a.keyCode){var e=b.val().split(" ");$.each(e,function(a,c){void 0!==c&&(c.match(/http/g)||c.match(/www\./g))&&($(".contribution-link").val(c),0!==a?e.splice(a,1):e.splice(0,1),j.prop("checked",!0),j.trigger("change"));var d=e.toString().replace(/,/g," ");b.val(d)})}})},is_contribution:function(){j.on("change",function(){j.prop("checked")?(i.addClass("contributionactive"),b.attr({name:"description"}),h.addClass("down"),g.addClass("down")):(i.removeClass("contributionactive"),b.attr({name:"content"}),h.removeClass("down"),g.removeClass("down"))})},mobileMenu:function(){},filterDiscussionContributions:function(){c.on("click","a",function(){var a,b=$(this),d=b.data("type");return b.hasClass("search-filter")?(c.find("a").removeClass("active"),b.addClass("active"),f.addClass("active")):f.removeClass("active"),"contributions"!==d?($(".discussion-contribution.discusion").removeClass("hidden"),d?("Discussion"===window.tabactive?0===window.location.pathname.indexOf("/cursos")?(a="discusiones",d=window.searchTypes[d]):a="discussions":0===window.location.pathname.indexOf("/cursos")?(a="aportes",d=window.searchTypes[d]):a="contributions",Backbone.history.navigate(a+"/"+d+"/",{trigger:!0})):Backbone.history.navigate("discusiones/",{trigger:!0})):b.hasClass("all-contributions")&&(c.find("a").removeClass("active"),b.addClass("active"),$(".discussion-contribution.discusion").addClass("hidden"),$(".discussion-contribution.contribution").removeClass("hidden")),!1})},displayAdmin:function(){a.on("click",".admin-container",function(a){a.stopPropagation(),$(this).is(".active")?$(this).removeClass("active"):$(this).addClass("active")})},responsiveDiscussions:function(){return $button=$(".btn-display-discussion"),$button.on("click",function(){$button.hasClass("active")?(k.removeClass("active"),$button.removeClass("active")):(k.addClass("active"),$button.addClass("active"))}),!1},dicussion_contributtion_add:function(){i.validate(),i.on("submit",function(){if(i.valid()){var a;a=j.prop("checked")?"Contribution":"Discussion";var b=$(this),c=window.actions["add"+a];return $.post(c,b.serialize()+"&is_ajax=true",function(a){a.isNew=!0,j.prop("checked")?window.collections.contributions.add(a):(Backbone.history.navigate("/discusiones/",{trigger:!0}),window.collections.discussions.add(a)),i.reset(),j.prop("checked",!1),j.trigger("change"),$(".chosen").trigger("liszt:updated"),window.log("create_comment",a.id,a.shash,a.content,window.course)}).fail(function(a){timeline.errorsDisplay(a),i.find("option").removeAttr("selected"),$(".chosen").trigger("liszt:updated")}),!1}}),$("#classified").on("change",function(){i.valid()?i.trigger("submit"):(i.find("option").removeAttr("selected"),$(".chosen").trigger("liszt:updated"))})},errorsDisplay:function(a){var b=$(".error-display");$.each(a.responseJSON,function(a,c){$.each(c,function(a,c){b.addClass("active"),b.html(c+"<br/>");setTimeout(function(){b.removeClass("active")},3e3)})})},loadMaterial:function(){$("body").on("click",".material-url",function(){var a=$(this),b=a.attr("href");return m.addClass("active loading"),$.get(b,function(a){m.html(a).removeClass("loading"),history.pushState({page:b},b,b),prettyPrint()}),!1})},inifiniteScroll:function(){function a(a,b){var c={navSelector:".infinitescroll .next",nextSelector:".infinitescroll .next:last",itemSelector:b,bufferPx:400,binder:a,path:function(){a.infinitescroll("pause");var b,c,d,e;return"Discussion"===window.tabactive?(d="discussion",b=window.collections.discussions.type,c=window.collections.discussions.page,term=window.collections.discussions.term):(d="contribution",b=window.collections.discussions.type,c=window.collections.contributions.page,term=window.collections.contributions.term),"search"===b?(e="Discussion"===window.tabactive?window.actions.searchDiscussion:window.actions.searchContribution,e=e+"?is_ajax=true&page="+c+"&search="+term):e="/course/"+window.course+"/"+d+"/page/"+c+"/?filter="+b,e},loading:{msgText:'<h5 class="finish '+type+'"></h5>',finishedMsg:'<h5 class="finish '+type+'"></h5>',img:"data:image/gif;base64,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"},dataType:"json",errorCallback:function(a){console.log(a)},appendCallback:!1};return c}function b(a){$.each(a,function(a,b){"discussion"===b.model?window.collections.discussions.add(b):window.collections.contributions.add(b)}),window.collections.discussions.page++,c.infinitescroll(void 0===a[0]?"pause":"resume")}var c=$(".dicussions-list"),d=$(".contributions-list");type=window.collections.discussions.type,c.infinitescroll(a(c,".discusion"),b),d.infinitescroll(a(d,".contribution"),b)},materialFilters:function(){function a(a){var e=$(a);d.find("li").removeClass("active"),e.addClass("active"),c=0===window.location.pathname.indexOf("/cursos")?"materiales":"materials","class"===b?Backbone.history.navigate("/",{trigger:!0}):Backbone.history.navigate("/"+c+"/"+b+"/",{trigger:!0})}var b,c;d.on("click",function(c){var d=$(this);b=d.find("a").attr("href"),a(this),c.stopPropagation(),c.preventDefault()}),$(".materials-filters-container").on("change","select.mnav",function(c){var d=$(this);b=d.val(),a(),c.stopPropagation(),c.preventDefault()})},outstandings:function(){window.data.outstandings&&($Best=$("#BestUsers"),$.each(window.data.outstandings,function(a,b){var c=_.template($("#BestUser-template").html())(b);$Best.append(c)}))},search:function(){var a=$(".search");a.on("submit",function(b){b.preventDefault();var c=a.find(".search-input").val();"Discussion"===window.tabactive&&(window.collections.discussions.setType("search",c),window.collections.discussions.fetch(),window.collections.contributions.setType("search",c),window.collections.contributions.fetch())})}},timeline.init(),window.routers.timeline=new Platzi.Routers.TimelineRouter;var p,q=window.location.pathname.match(/\/(course|cursos)\/[\w-]+\//);p=q&&q.length?q[0]:window.location.pathname,Backbone.history.start({root:p,pushState:!0,silent:!1})});